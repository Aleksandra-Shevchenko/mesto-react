{"version":3,"sources":["components/Footer.js","images/logo-white.svg","components/Header.js","components/ImagePopup.js","utils/api.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/App.js","reportWebVitals.js","index.js"],"names":["Footer","className","Header","src","logo","alt","ImagePopup","onClose","card","isOpen","element","name","link","React","useEffect","handleEscapeClose","event","key","document","addEventListener","removeEventListener","onClick","type","aria-label","api","baseUrl","headers","this","_baseUrl","_userUrl","_cardsUrl","_likesUrl","_token","fetch","authorization","then","res","ok","json","Promise","reject","status","about","method","body","JSON","stringify","avatar","cardId","isLiked","CurrentUserContext","createContext","Card","props","currentUser","useContext","isOwn","owner","_id","cardDeleteButtonClassName","likes","some","i","cardLikeButtonClassName","onCardClick","onCardDelete","onCardLike","length","Main","useState","cards","setCards","handleCardLike","changeLikeCardStatus","newCard","newCards","map","c","handleCardDelete","deleteCard","filter","getInitialCards","data","catch","err","console","log","onEditAvatar","onEditProfile","onAddPlace","item","PopupWithForm","title","btnName","children","onSubmit","noValidate","EditProfilePopup","onUpdateUser","setName","description","setDescription","e","preventDefault","value","onChange","target","id","placeholder","minLength","maxLength","required","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","App","isEditProfilePopupOpen","setEditProfileClick","isAddPlacePopupOpen","setAddPlaceClick","isEditAvatarPopupOpen","setEditAvatarClick","selectedCard","setSelectedCard","setCurrentUser","closeAllPopups","getUserData","Provider","newUserData","saveUserChanges","changedAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a17f7f53.chunk.js","sourcesContent":["\r\n//--- Компонент подвала сайта ---\r\nfunction Footer() {\r\n  return (\r\n    <footer className=\"footer page__center\">\r\n      <p className=\"footer__content\"> &copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  )\r\n}\r\n  \r\nexport default Footer;\r\n  ","export default __webpack_public_path__ + \"static/media/logo-white.ff16f24b.svg\";","import logo from '../images/logo-white.svg';\r\n\r\n//--- Компонент шапки сайта ---\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header page__center\">\r\n      <img className=\"logo\" src={logo} alt=\"Логотип Место\" />\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header;\r\n","import React from 'react';\r\n\r\n//--- Компонент попапа с картинкой ---\r\nfunction ImagePopup({onClose, card:{isOpen, element:{name, link}}}) {\r\n\r\n  //при открытии попапа вешаем слушатель закрытия по ESC\r\n  React.useEffect(() => {\r\n    if (!isOpen) return;\r\n    \r\n    const handleEscapeClose = (event) => {\r\n      if (event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", handleEscapeClose);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleEscapeClose);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n\r\n    return (\r\n      <section className={`popup popup_type_image ${isOpen ? 'popup_opened' : false}`}>\r\n        <div className=\"popup__container popup__container_type_image\">\r\n          <img className=\"popup__photo\" src={link} alt={`Фото ${name}`} />\r\n          <h2 className=\"popup__photo-title\">{name}</h2>\r\n          <button onClick={onClose} className=\"popup__close\" type=\"button\" aria-label=\"Закрыть окно\" />\r\n        </div>\r\n      </section>\r\n    )\r\n  }\r\n    \r\nexport default ImagePopup;\r\n    ","// --- КЛАСС ДЛЯ ОТПРАВКИ ЗАПРОСОВ НА СЕРВЕР ---\n\nclass Api {\n  constructor({\n    baseUrl,\n    headers\n  }) {\n    this._baseUrl = baseUrl;\n    this._userUrl = `${this._baseUrl}/users/me`;\n    this._cardsUrl = `${this._baseUrl}/cards`;\n    this._likesUrl = `${this._baseUrl}/cards/likes`;\n    this._token = headers['authorization'];\n  }\n\n  //метод получения информации о пользователе с сервера\n  getUserData() {\n    return fetch(this._userUrl, {\n        headers: {\n          authorization: this._token,\n        }\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Ошибка: ${res.status}`);\n      })\n  }\n\n  //метод сохранения отредактированных данных пользователя на сервере\n  saveUserChanges({\n    name,\n    about\n  }) {\n    return fetch(this._userUrl, {\n        method: 'PATCH',\n        headers: {\n          authorization: this._token,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: name,\n          about: about,\n        })\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Ошибка: ${res.status}`);\n      })\n  }\n\n  //метод обновления аватара пользователя\n  changedAvatar(src) {\n    return fetch(`${this._userUrl}/avatar`, {\n        method: 'PATCH',\n        headers: {\n          authorization: this._token,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          avatar: src,\n        })\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Ошибка: ${res.status}`);\n      })\n  }\n\n  //метод получения карточек с сервера\n  getInitialCards() {\n    return fetch(this._cardsUrl, {\n        headers: {\n          authorization: this._token,\n        }\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Ошибка: ${res.status}`);\n      })\n  }\n\n  //метод добавления новой карточки на сервер\n  postNewCard({\n    name,\n    link\n  }) {\n    return fetch(this._cardsUrl, {\n        method: 'POST',\n        headers: {\n          authorization: this._token,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          name: name,\n          link: link,\n        })\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Ошибка: ${res.status}`);\n      })\n  }\n\n  //метод удаления карточки пользователя с сервера\n  deleteCard(cardId) {\n    return fetch(`${this._cardsUrl}/${cardId}`, {\n        method: 'DELETE',\n        headers: {\n          authorization: this._token,\n        }\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Ошибка: ${res.status}`);\n      })\n  }\n\n  //метод постановки лайка карточке\n  // likedCard(cardId) {\n  //   return fetch(`${this._likesUrl}/${cardId}`, {\n  //       method: 'PUT',\n  //       headers: {\n  //         authorization: this._token,\n  //       }\n  //     })\n  //     .then(res => {\n  //       if (res.ok) {\n  //         return res.json();\n  //       }\n  //       return Promise.reject(`Ошибка: ${res.status}`);\n  //     })\n  // }\n\n  //метод удаления лайка с карточки\n  // dislikedCard(cardId) {\n  //   return fetch(`${this._likesUrl}/${cardId}`, {\n  //       method: 'DELETE',\n  //       headers: {\n  //         authorization: this._token,\n  //       }\n  //     })\n  //     .then(res => {\n  //       if (res.ok) {\n  //         return res.json();\n  //       }\n  //       return Promise.reject(`Ошибка: ${res.status}`);\n  //     })\n  // }\n\n  changeLikeCardStatus(cardId, isLiked){\n    if(isLiked){\n      return fetch(`${this._likesUrl}/${cardId}`, {\n        method: 'PUT',\n        headers: {\n          authorization: this._token,\n        }\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Ошибка: ${res.status}`);\n      })\n    } else {\n      return fetch(`${this._likesUrl}/${cardId}`, {\n        method: 'DELETE',\n        headers: {\n          authorization: this._token,\n        }\n      })\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        return Promise.reject(`Ошибка: ${res.status}`);\n      })\n    }\n  }\n}\n\n\n//создаем экземпляр класса Api\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-19',\n  headers: {\n    authorization: '249de57f-61eb-4f88-a95a-b462a0c3429a',\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\n//--- Компонент карточки с фото ---\r\nfunction Card(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = props.card.owner._id === currentUser._id;\r\n  const cardDeleteButtonClassName = (\r\n    `element__trash ${isOwn ? 'element__trash_visible' : 'element__trash_hidden'}`\r\n  ); \r\n\r\n\r\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n  const cardLikeButtonClassName = (\r\n    `element__like ${isLiked ? 'element__like_active' : ''}`\r\n  ); \r\n  \r\n  //обработчик клика по карточке\r\n  function handleClick() {\r\n    props.onCardClick(props.card);\r\n  }\r\n\r\n  //обработчик клика по кнопке лайка\r\n  function handleLikeClick() {\r\n    props.onCardLike(props.card);\r\n  }\r\n\r\n  //обработчик клика по кнопке удаления\r\n  function handleTrashClick() {\r\n    props.onCardDelete(props.card);\r\n  }\r\n\r\n  return (\r\n    <article className=\"element\">\r\n      <img  className=\"element__pic\" src={props.card.link} alt={`Фото ${props.card.name}`} onClick={handleClick}/>\r\n      <button className={cardDeleteButtonClassName} type=\"button\" aria-label=\"Удалить карточку\" onClick={handleTrashClick} />\r\n      <div className=\"element__desc\">\r\n        <h2 className=\"element__title\">{props.card.name}</h2>\r\n        <div className=\"element__like-group\">\r\n          <button className={cardLikeButtonClassName} type=\"button\" aria-label=\"Лайкнуть\" onClick={handleLikeClick}/>\r\n          <p className=\"element__sum-like\">{props.card.likes.length}</p>\r\n        </div>\r\n       </div>\r\n    </article>\r\n  )\r\n}\r\n    \r\nexport default Card;","import React from 'react';\r\nimport api from '../utils/api.js';\r\nimport Card from './Card.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\n//--- Компонент основного контента страницы ---\r\nfunction Main(props) { \r\n  const [cards, setCards] = React.useState([]);\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  //при загрузке страницы получаем данные карточек\r\n  React.useEffect(() => {\r\n    api.getInitialCards()\r\n      .then((data) => {\r\n        setCards(data);\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      })\r\n  }, []);\r\n\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    \r\n    // Отправляем запрос в API и получаем обновлённые данные карточки\r\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\r\n        // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\r\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n      // Обновляем стейт\r\n      setCards(newCards);\r\n    });\r\n} \r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id).then(() => {\r\n        // После запроса в API, обновите стейт cards с помощью метода filter: создайте копию массива, исключив из него удалённую карточку.\r\n      const newCards = cards.filter((c) => c._id === card._id ? false : true);\r\n      // Обновляем стейт\r\n      setCards(newCards);\r\n    });\r\n} \r\n\r\n  return (\r\n    <main className=\"container\">\r\n      <section className=\"profile page__center\">\r\n        <div className=\"profile__content\">\r\n          <div className=\"profile__pic\">\r\n            <img src={currentUser.avatar} alt=\"Аватар пользователя\" className=\"profile__avatar\" />\r\n            <button className=\"profile__change-btn\" type=\"button\" aria-label=\"Изменить аватар пользователя\" onClick={props.onEditAvatar} />\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__row\">\r\n              <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n              <button className=\"profile__edit-btn\" type=\"button\" aria-label=\"Редактировать профиль\" onClick={props.onEditProfile} />\r\n            </div>\r\n            <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n          </div>\r\n        </div>\r\n        <button className=\"profile__add-btn\" type=\"button\" aria-label=\"Добавить фото\" onClick={props.onAddPlace} />\r\n      </section>\r\n        \r\n      <section className=\"elements page__center\" aria-label=\"Фотографии\">\r\n        {cards.map((item) => (\r\n          <Card key={item['_id']} card={item} onCardClick={props.onCardClick} onCardLike={handleCardLike} onCardDelete={handleCardDelete}/>)\r\n        )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n  ","import React from 'react';\r\n\r\n//--- Компонент попапов ---\r\nfunction PopupWithForm({name, title, btnName, isOpen, onClose, children, onSubmit}) {\r\n\r\n  //при открытии попапа вешаем слушатель закрытия по ESC\r\n  React.useEffect(() => {\r\n    if (!isOpen) return;\r\n\r\n    const handleEscapeClose = (event) => {\r\n      if (event.key === 'Escape') {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"keydown\", handleEscapeClose);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", handleEscapeClose);\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  return (\r\n    <section className={`popup popup_type_${name} ${isOpen ? 'popup_opened' : false}`} >\r\n      <div className={`popup__container popup__container_type_${name}`}>\r\n        <h3 className=\"popup__title\">{title}</h3>\r\n        <form className=\"popup__form\" name={`popup-form-${name}`} noValidate onSubmit={onSubmit}>\r\n          <>{children}</>\r\n          <button className=\"popup__submit-btn\" type=\"submit\">{btnName}</button>\r\n        </form>\r\n        <button onClick={onClose} className=\"popup__close\" type=\"button\" aria-label=\"Закрыть окно\"></button>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n  \r\nexport default PopupWithForm;\r\n  ","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\n\r\n//--- Компонент попапа изменения профиля ---\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser}) {\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeDescription(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  } \r\n\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]); \r\n\r\n  return (\r\n    <PopupWithForm \r\n      title='Редактировать профиль'\r\n      name='edit' isOpen={isOpen}\r\n      btnName='Сохранить'\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}>\r\n        <input value={name || ''} onChange={handleChangeName} id=\"name-input\" type=\"text\" placeholder=\"Имя\" className=\"popup__input popup__input_text_name\" name=\"name\" minLength=\"2\" maxLength=\"40\" required />\r\n        <span id=\"name-input-error\" className=\"popup__input-error\"></span>\r\n        <input value={description || ''} onChange={handleChangeDescription} id=\"job-input\" type=\"text\" placeholder=\"О себе\" className=\"popup__input popup__input_text_job\" name=\"about\" minLength=\"2\" maxLength=\"200\" required />\r\n        <span id=\"job-input-error\" className=\"popup__input-error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n    \r\n  export default EditProfilePopup;\r\n    ","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\n\r\n//--- Компонент попапа изменения профиля ---\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar}) {\r\n  const avatarRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: avatarRef.current.value,\r\n    });\r\n  } \r\n  \r\n  return (\r\n    <PopupWithForm\r\n    title='Обновить аватар'\r\n    name='change-avatar'\r\n    isOpen={isOpen}\r\n    btnName='Сохранить'\r\n    onClose={onClose}\r\n    onSubmit={handleSubmit}>\r\n      <input ref={avatarRef} id=\"change-avatar-input\" type=\"url\" placeholder=\"Ссылка на картинку\" className=\"popup__input popup__input_change-avatar_link\" name=\"link\" required />\r\n      <span id=\"change-avatar-input-error\" className=\"popup__input-error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n    \r\nexport default EditAvatarPopup;\r\n    ","import React from 'react';\nimport Footer from './Footer.js';\nimport Header from './Header.js';\nimport ImagePopup from './ImagePopup.js';\nimport Main from './Main.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport api from '../utils/api.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\n\n\n\nfunction App() {\n  const [isEditProfilePopupOpen, setEditProfileClick] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlaceClick] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarClick] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({isOpen: false, element: {}});\n  const [currentUser, setCurrentUser] = React.useState({});\n\n\n  //при загрузке страницы получаем данные пользователя\n  React.useEffect(() => {\n    api.getUserData()\n      .then(data => {\n        setCurrentUser(data);\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  }, []);\n  \n\n\n  function handleEditAvatarClick() {\n    setEditAvatarClick(true);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfileClick(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlaceClick(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard({...selectedCard, isOpen: true, element: card});\n  }\n\n  function closeAllPopups() {\n    setEditAvatarClick(false);\n    setEditProfileClick(false);\n    setAddPlaceClick(false);\n    setSelectedCard({...selectedCard, isOpen: false});\n  }\n\n  function handleUpdateUser(newUserData) {\n    api.saveUserChanges(newUserData)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  }\n\n  function handleUpdateAvatar({ avatar }) {\n    api.changedAvatar(avatar)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => {\n        console.log(err);\n      })\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n    <div className=\"page\">\n      <Header />\n\n      <Main \n      onEditProfile={handleEditProfileClick} \n      onAddPlace={handleAddPlaceClick} \n      onEditAvatar={handleEditAvatarClick} \n      onCardClick={handleCardClick} \n      />\n\n      <Footer />\n\n      <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n\n      <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n\n      <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/> \n\n        \n      <PopupWithForm\n      title='Новое место'\n      name='add-card'\n      isOpen={isAddPlacePopupOpen}\n      btnName='Создать' onClose={closeAllPopups}>\n        <input id=\"card-name-input\" type=\"text\" placeholder=\"Название\" className=\"popup__input popup__input_add-card_name\" name=\"name\" minLength=\"2\" maxLength=\"30\" required />\n        <span id=\"card-name-input-error\" className=\"popup__input-error\"></span>\n        <input id=\"card-link-input\" type=\"url\" placeholder=\"Ссылка на картинку\" className=\"popup__input popup__input_add-card_link\" name=\"link\" required />\n        <span id=\"card-link-input-error\" className=\"popup__input-error\"></span>\n      </PopupWithForm>\n                              \n      <PopupWithForm\n      title='Вы уверены?'\n      name='confirm'\n      btnName='Да'>\n      </PopupWithForm>          \n    </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}